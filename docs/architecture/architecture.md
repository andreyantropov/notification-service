# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–µ—Ä–≤–∏—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ‚Äî –µ–≥–æ —Ü–µ–ª–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ —Ä–æ–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–û–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è:

- –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤,
- –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–æ–≤,
- DevOps,
- —Ç–µ—Ö, –∫—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å –≤ –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã.

> üí° –î–æ–∫—É–º–µ–Ω—Ç —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ **"–ø–æ—á–µ–º—É" –∏ "–∫–∞–∫ –≤ —Ü–µ–ª–æ–º"**, –∞ –Ω–µ –Ω–∞ –¥–µ—Ç–∞–ª—è—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.  
> –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö `docs/`.

> üéØ –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–µ–Ω:
>
> - **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É** ‚Äî —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω —Å–µ—Ä–≤–∏—Å –∏ –≥–¥–µ —á—Ç–æ –ª–µ–∂–∏—Ç.
> - **DevOps / SRE** ‚Äî —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —Å–µ—Ä–≤–∏—Å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è.
> - **–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä—É** ‚Äî —á—Ç–æ–±—ã –æ—Ü–µ–Ω–∏—Ç—å –ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.
> - **–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫—É** ‚Äî —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã.

## –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ Bitrix24 API –∏–ª–∏ Email.
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ InfluxDB –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ Grafana.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```src/
‚îú‚îÄ‚îÄ api/ # API
‚îÇ ‚îú‚îÄ‚îÄ openapi/ # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger
‚îÇ ‚îî‚îÄ‚îÄ schemas/ # ZOD-—Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ application/ # –ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π —É—Ä–æ–≤–µ–Ω—å: –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ ‚îú‚îÄ‚îÄ jobs/ # –ü—Ä–æ—Ü–µ—Å—Å—ã
‚îÇ ‚îú‚îÄ‚îÄ ports/ # –ü–æ—Ä—Ç—ã
‚îÇ ‚îú‚îÄ‚îÄ services/ # –°–µ—Ä–≤–∏—Å—ã
‚îÇ ‚îú‚îÄ‚îÄ types/ # –¢–∏–ø—ã
‚îÇ ‚îî‚îÄ‚îÄ useCases/ # UseCase'—ã
‚îú‚îÄ‚îÄ composition/ # Composition Root
‚îÇ ‚îú‚îÄ‚îÄ bootstrap/ # –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ ‚îú‚îÄ‚îÄ container/ # DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
‚îÇ ‚îú‚îÄ‚îÄ lifecycle/ # –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ ‚îú‚îÄ‚îÄ telemetry/ # –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è
‚îÇ ‚îî‚îÄ‚îÄ types/ # –¢–∏–ø—ã
‚îú‚îÄ‚îÄ configs/ # –ö–æ–Ω—Ñ–∏–≥–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ domain/ # –î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
‚îÇ ‚îú‚îÄ‚îÄ ports/ # –ü–æ—Ä—Ç—ã
‚îÇ ‚îî‚îÄ‚îÄ types/ # –¢–∏–ø—ã
‚îú‚îÄ‚îÄ infrastructure/ # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ ‚îú‚îÄ‚îÄ buffers/ # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
‚îÇ ‚îú‚îÄ‚îÄ counters/ # –°—á–µ—Ç—á–∏–∫–∏
‚îÇ ‚îú‚îÄ‚îÄ http/ # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
‚îÇ ‚îú‚îÄ‚îÄ loggers/ # –õ–æ–≥–≥–µ—Ä—ã
‚îÇ ‚îú‚îÄ‚îÄ ports/ # –ü–æ—Ä—Ç—ã
‚îÇ ‚îú‚îÄ‚îÄ senders/ # –ö–∞–Ω–∞–ª—ã —Ä–∞—Å—Å—ã–ª–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ ‚îú‚îÄ‚îÄ telemetry/ # –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è
‚îÇ ‚îî‚îÄ‚îÄ types/ # –¢–∏–ø—ã
‚îú‚îÄ‚îÄ shared/ # –û–±—â–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ index.ts # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è/Composition Root
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞—Ö, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏—Ö **–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**, **—Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** –∏ **–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã**.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

- **Clean Architecture**  
  –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏: `domain`, `application`, `infrastructure`, `api`.  
  –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π (HTTP, –±–∞–∑—ã, –æ—á–µ—Ä–µ–¥–∏).

- **12-Factor App**  
  –°–µ—Ä–≤–∏—Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º [12-factor](https://12factor.net/):
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`).
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (stateless).
  - –ï–¥–∏–Ω—ã–π –∫–æ–¥–±–µ–π–∑, —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `stdout`.  
    –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å** –∏ **–ø–æ–¥–¥–µ—Ä–∂–∫—É CI/CD**.

- **Dependency Injection (DI)**  
  –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —è–≤–Ω–æ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
  - –ì–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏).
  - –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–ø–æ–¥–º–µ–Ω–∞ –º–æ–∫–∞–º–∏).
  - –ò–∑–±–µ–∂–∞—Ç—å –∂—ë—Å—Ç–∫–æ–π —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏.

- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –∏ –ø—Ä–æ—Å—Ç–æ—Ç–∞**  
  –°–µ—Ä–≤–∏—Å—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ **—á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** —Å —è–≤–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.  
  –ú—ã —Å–ª–µ–¥—É–µ–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **KISS** (Keep It Simple) –∏ **DRY** (Don't Repeat Yourself):
  - –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, fallback-–æ—Ç–ø—Ä–∞–≤–∫–∞) –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏.
  - –°–ª–æ–∂–Ω—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.  
    –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–¥–∞.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **–°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (NS)**
   - –û–ø–∏—Å–∞–Ω–∏–µ: –°–µ—Ä–≤–∏—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —Å–≤—è–∑–∏ (Bitrix24, Email). –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ API.
   - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: TypeScript + Node.js.
   - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
     - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏: `axios`, `nodemailer`, `express`, `@influxdata/influxdb-client`, `dotenv`, `awilix`, `opentelemetry`.
     - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: `eslint`, `prettier`, `vitest`, `ts-node`, `nodemon`.
2. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Log)**
   - –û–ø–∏—Å–∞–Ω–∏–µ: –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞.
   - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: InfluxDB.
   - –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞: `@influxdata/influxdb-client`.
3. **–ö–∞–Ω–∞–ª—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
   - **Bitrix24**: –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ API Bitrix24.
     - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: `axios`.
   - **SMTP**: –†–µ–∑–µ—Ä–≤–Ω—ã–π –∫–∞–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ –ø–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä.
     - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `nodemailer`.

## –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. –í–Ω–µ—à–Ω—è—è —Å—Ö–µ–º–∞

```mermaid
flowchart TB
    subgraph Docker
        Container[–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä notification-service]
    end
    ExternalSystem -->|HTTP POST /notifications| Container
    Container --> Bitrix[(Bitrix24 API)]
    Container --> SMTP[(SMTP —Å–µ—Ä–≤–µ—Ä)]
    Container --> Log[(InfluxDB)]
    Log --> Admin
    Bitrix --> User
    SMTP --> User
```

### 2. –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ö–µ–º–∞

```mermaid

graph TD
  subgraph Domain
    Notification[Notification]
    Recipient[Recipient]
    Sender[Sender]
  end

  subgraph Application
    Buffer[Buffer<Notification>]
    Logger[Logger]
    DeliveryService[NotificationDeliveryService]
    UseCase[createSendNotificationUseCase]
    Process[createSendNotificationProcess]
    Strategy[sendToFirstAvailableStrategy]
  end

  subgraph Infrastructure
    BufferImpl[InMemoryBuffer]
    BitrixSender[BitrixSender]
    SmtpSender[SmtpSender]
    LoggerAdapter[LoggerAdapter]
  end

  UseCase -->|DI| Buffer
  UseCase -->|DI| DeliveryService
  UseCase -->|DI| LoggerAdapter
  Process -->|reads| Buffer
  Process -->|calls| DeliveryService
  Process -->|DI| LoggerAdapter
  DeliveryService -->|uses| Strategy
  DeliveryService -->|sends via| BitrixSender
  DeliveryService -->|sends via| SmtpSender
  BufferImpl -.->|implements| Buffer
  BitrixSender -.->|implements| Sender
  SmtpSender -.->|implements| Sender
  LoggerAdapter -.->|implements| Logger
```

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**:
   - –°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (NS) –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º —á–µ—Ä–µ–∑ HTTP-–∑–∞–ø—Ä–æ—Å `POST /notifications`.
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**:
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è NS –ø—Ä–∏–º–µ–Ω—è–µ—Ç **–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–æ—Å—Ç–∞–≤–∫–∏**.
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `sendToFirstAvailableStrategy`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞–Ω–∞–ª—ã.
   - –ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –∫–∞–Ω–∞–ª –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª ‚Äî –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞.
3. **–û—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É**:
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å.
   - –°—Ä–æ—á–Ω—ã–µ (`isUrgent: true`) ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ.
   - –ù–µ—Å—Ä–æ—á–Ω—ã–µ ‚Äî –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ –±—É—Ñ–µ—Ä –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏.
   - –ö–ª–∏–µ–Ω—Ç—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 202 Accepted (–µ—Å–ª–∏ –µ—Å—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ), 207 Multi-Status (–µ—Å–ª–∏ —á–∞—Å—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω–∞) –∏–ª–∏ 400 Bad Request (–µ—Å–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è).
   - –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è (—É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏, –æ—à–∏–±–∫–∏, —É–¥–∞–ª–µ–Ω–∏—è) –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ InfluxDB –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

## –ú–æ–¥—É–ª—å–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –±—ã—Ç—å –≥–∏–±–∫–æ–π –∏ –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–π. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–Ω—Ü–∏–ø –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`Dependency Injection`) –∏ –ø–∞—Ç—Ç–µ—Ä–Ω **—Ñ–∞–±—Ä–∏–∫**.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ —á–µ—Ä–µ–∑ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

–î–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∞–±—Ä–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

–≠—Ç–æ –¥–∞—ë—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- **–ö–ª–∏–µ–Ω—Ç—ã –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å**
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**
- **–£–¥–æ–±—Å—Ç–≤–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –º–æ–∫–Ω—É—Ç—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ü—Ä–∏–º–µ—Ä:

```ts
container.register({
  bitrixSender: asFunction(({ bitrixConfig }) =>
    createBitrixSender(bitrixConfig),
  ).singleton(),
  smtpSender: asFunction(({ smtpConfig }) =>
    createSmtpSender(smtpConfig),
  ).singleton(),
  notificationDeliveryService: asFunction(
    ({ bitrixSender, smtpSender, loggerAdapter }) =>
      createNotificationDeliveryService(
        [bitrixSender, smtpSender],
        loggerAdapter,
      ),
  ).singleton(),
});
```

## API —Å–µ—Ä–≤–∏—Å–∞

API —Å–µ—Ä–≤–∏—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π HTTP-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º (email, Bitrix24 –∏ –¥—Ä.). –û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `/v1/notifications` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–∞–∫ –æ–¥–∏–Ω–æ—á–Ω—ã–µ, —Ç–∞–∫ –∏ –ø–∞–∫–µ—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–¥–æ 100 –∑–∞ —Ä–∞–∑), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –≥–∏–±–∫–æ—Å—Ç—å –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

–°–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ **Express.js** –±–ª–∞–≥–æ–¥–∞—Ä—è –µ–≥–æ –ª—ë–≥–∫–æ—Å—Ç–∏ –∏ –±—ã—Å—Ç—Ä–æ—Ç–µ, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∫ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –æ–≤–µ—Ä—Ö–µ–¥—É –∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API —Å—Ç—Ä–æ–∏—Ç—Å—è –≤–æ–∫—Ä—É–≥ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ REST –∏ HTTP-—Å–µ–º–∞–Ω—Ç–∏–∫–∏: –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã, middleware-–æ–±—Ä–∞–±–æ—Ç–∫–∞ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, rate limiting, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ) –∏ healthcheck-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏.

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ **–ø–æ–ª–Ω–∞—è OpenAPI-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (Swagger)**, –¥–æ—Å—Ç—É–ø–Ω–∞—è –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ñ–æ—Ä–º–µ –ø–æ –∞–¥—Ä–µ—Å—É `/api-docs`. –û–Ω–∞ –≤–∫–ª—é—á–∞–µ—Ç:

- —Ç–æ—á–Ω—ã–µ —Å—Ö–µ–º—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤,
- –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è,
- –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤.

> üí° –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API, –≤–∫–ª—é—á–∞—è —Ñ–æ—Ä–º–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤ –∏ –ø—Ä–∏–º–µ—Ä—ã, –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª: [`api.md`](./api.md).

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–°–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–≥–∏–±–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**, –ø–æ–∑–≤–æ–ª—è—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ—Å—Ç—å –∫–∞–Ω–∞–ª–æ–≤, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ —Ç.–¥.).

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è **"–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–º—É –¥–æ—Å—Ç—É–ø–Ω–æ–º—É"** (`sendToFirstAvailableStrategy`), –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π:

- –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–≤—ã–π —Ä–∞–±–æ—á–∏–π –∫–∞–Ω–∞–ª –∏–∑ —Å–ø–∏—Å–∫–∞.
- –ï—Å–ª–∏ –∫–∞–Ω–∞–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É.
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–∏ —É–¥–∞—á–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º.

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –Ω–∞ –∫–∞–Ω–∞–ª ‚Äî 1 (–º–æ–∂–µ—Ç –±—ã—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–æ —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã `retry`).

> –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º", "–ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é", "—Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π") –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞ —Å–µ—Ä–≤–∏—Å–∞.

> üí° –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º –¥–æ—Å—Ç—É–ø–Ω–∞ –≤: [`docs/strategies.md`](./strategies.md).

## –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –±–∞—Ç—á–∏–Ω–≥

–î–ª—è –Ω–µ—Å—Ä–æ—á–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (`isUrgent: false` –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **InMemoryBuffer** ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –ø–∞–º—è—Ç–∏.

- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ –±—É—Ñ–µ—Ä –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏.
- –†–∞–∑ –≤ `PROCESS_BATCHING_INTERVAL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60 —Å–µ–∫) —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–±–∏—Ä–∞–µ—Ç –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –ø–∞—á–∫–æ–π.
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ API (Bitrix, SMTP) –∏ –∏–∑–±–µ–∂–∞—Ç—å "—Ñ–ª—É–¥–∞".

> ‚ö†Ô∏è –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–∏—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—É—Ñ–µ—Ä–µ **—Ç–µ—Ä—è—é—Ç—Å—è**.  
> –î–ª—è –ø–æ–ª–Ω–æ–π –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –≤ –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Redis, Kafka).

## –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

–°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Å—Ä–µ–¥–µ Docker. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ** –º–µ–∂–¥—É development, staging –∏ production-—Å—Ä–µ–¥–∞–º–∏.
- **–ò–∑–æ–ª—è—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è.
- **–ü–æ–¥–¥–µ—Ä–∂–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è** —á–µ—Ä–µ–∑ CI/CD –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, Kubernetes).

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Node.js –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (Bitrix24, SMTP, InfluxDB) —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç [12-factor app methodology](https://12factor.net/). –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: env.example.

> üí° –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ, –∑–∞–ø—É—Å–∫—É –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º –¥–æ—Å—Ç—É–ø–Ω–∞ –≤: [`docs/docker.md`](./docker.md).

## –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è

–°–µ—Ä–≤–∏—Å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**, **—Å–∫–≤–æ–∑–Ω—É—é –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é** –∏ **–æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—É—é –∑–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏–π**.

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

- **–ß–∏—Å—Ç–æ—Ç–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏**: —Å–±–æ—Ä —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –Ω–µ –∑–∞—Å–æ—Ä—è–µ—Ç use cases –∏ domain-—Å–ª–æ–π.
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–∏ (`senders`) –∏ –±—É—Ñ–µ—Ä—ã (`buffers`) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è **–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏** –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–∏ –æ–±—ë—Ä—Ç–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç (`traceId`, `spanId`, `durationMs`) –∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç —Å–æ–±—ã—Ç–∏—è –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –≤ –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É.
- **Fail-safe logging**: –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º –ª–æ–≥–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è fallback-—Ü–µ–ø–æ—á–∫–µ (InfluxDB ‚Üí —Ñ–∞–π–ª ‚Üí stdout).

### –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è:

- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏** —Å –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º—ã–º–∏ —Ç–µ–≥–∞–º–∏: —É—Ä–æ–≤–µ–Ω—å (`level`), –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`environment`), —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è (`eventType`), —Ö–æ—Å—Ç –∏ –¥—Ä.
- **–°–∫–≤–æ–∑–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞** —á–µ—Ä–µ–∑ `traceId` (OpenTelemetry) –∏ `correlationId` (–±–∏–∑–Ω–µ—Å-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä), —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ.
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** —á–µ—Ä–µ–∑ Grafana —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø–æ–∏—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ –ª—é–±–æ–º—É –ø–æ–ª—é.
- **–ê–ª–µ—Ä—Ç–∏–Ω–≥ –≤ Telegram** –¥–ª—è —Å–æ–±—ã—Ç–∏–π —É—Ä–æ–≤–Ω—è `error` –∏ `critical` (—Ç–æ–ª—å–∫–æ –≤ production).

> üí° –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ö–µ–º–∞ –ø–æ–ª–µ–π, —Ç–µ–≥–æ–≤, —Ñ–æ—Ä–º–∞—Ç–∞ –ª–æ–≥–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤ ‚Äî –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ: [`docs/telemetry.md`](./telemetry.md).

## –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

–°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —É—Å—Ç–æ–π—á–∏–≤ –∫ —á–∞—Å—Ç–∏—á–Ω—ã–º —Å–±–æ—è–º –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º –±–ª–∞–≥–æ–¥–∞—Ä—è:

- **Fallback-—Ü–µ–ø–æ—á–∫–∞–º** –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ (–ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–µ–∑–µ—Ä–≤–Ω–æ–º—É –∫–∞–Ω–∞–ª—É) –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏ (InfluxDB ‚Üí —Ñ–∞–π–ª ‚Üí stdout).
- **–ì–∏–±–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫** ‚Äî —Å–±–æ–π –æ–¥–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É.
- **–°–∫–≤–æ–∑–Ω–æ–π —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–µ** —Å `traceId` –∏ `correlationId` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
- **–ê–ª–µ—Ä—Ç–∏–Ω–≥—É** –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ, –µ—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–∞–Ω–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω, –∞ –ª–æ–≥–∏ ‚Äî –∑–∞–ø–∏—Å–∞–Ω—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.

> üí° –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî –≤: [`docs/resilience.md`](./resilience.md).

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–°–µ—Ä–≤–∏—Å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∑–∞ —Å—á—ë—Ç:

- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤** —á–µ—Ä–µ–∑ `.env` (–Ω–µ –≤ –∫–æ–¥–µ).
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞** —á–µ—Ä–µ–∑ HTTPS (–≤–Ω–µ—à–Ω–∏–µ –≤—ã–∑–æ–≤—ã) –∏ TLS-—Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—é –Ω–∞ —É—Ä–æ–≤–Ω–µ nginx.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** —Å SMTP-—Å–µ—Ä–≤–µ—Ä–æ–º.
- **–†–∞–±–æ—Ç—ã –≤ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–π —Å–µ—Ç–∏** (–ø–æ–∫–∞ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤).

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å —É—á—ë—Ç–æ–º –±—É–¥—É—â–µ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è: –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Vault, API-–∫–ª—é—á–∏ –∏–ª–∏ JWT.

> üí° –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî –≤: [`docs/security.md`](./security.md).

## –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

–°–µ—Ä–≤–∏—Å –≤ —Ü–µ–ª–æ–º **stateless**, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º **InMemoryBuffer**, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –Ω–µ—Å—Ä–æ—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- **–ì–∏–±–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤** (Telegram, SMS –∏ –¥—Ä.) —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `NotificationSender`.
- **–ü–æ–¥–º–µ–Ω—è–µ–º—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π", "–≤—Å–µ –∫–∞–Ω–∞–ª—ã").
- **–ú–æ–¥—É–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π fallback-—Ü–µ–ø–æ—á–µ–∫.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –ø–æ–¥ —Ä–∞—Å—Ç—É—â–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –Ω–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –Ω–µ –Ω–∞—Ä—É—à–∞—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–∏.

> üí° –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî –≤: [`docs/scalability.md`](./scalability.md).

## Use Cases: –†–µ—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π **–Ω–µ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç** –æ—Ç–ø—Ä–∞–≤–∫—É –∏ **–Ω–µ –∑–Ω–∞–µ—Ç –æ –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏—è—Ö**. –û–Ω —è–≤–ª—è–µ—Ç—Å—è **–ø–∞—Å—Å–∏–≤–Ω—ã–º —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä–æ–º (dumb pipe)**, –∫–æ—Ç–æ—Ä—ã–π:

- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç ERP –∏ –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º.
- –î–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ Bitrix24, email –∏ –¥—Ä—É–≥–∏–µ –∫–∞–Ω–∞–ª—ã.
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É –ø–æ –ø–µ—Ä–≤–æ–º—É —Ä–∞–±–æ—á–µ–º—É –∫–∞–Ω–∞–ª—É.
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø—Ä–∏—ë–º–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É.

–°–µ–π—á–∞—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è:

1. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–º–º–µ—Ä—Å–∞–Ω—Ç–æ–≤ –ø—Ä–∏ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–∏ —Å–µ—Ä–∏–π–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞.
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ "–≥–ª—É–ø–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞" –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ—Ç—É, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

> üí° –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî –≤: [`docs/use-cases.md`](./use-cases.md).

## Composition Root: —Å–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∫–∞–Ω–∞–ª—ã –æ—Ç–ø—Ä–∞–≤–∫–∏, –ª–æ–≥–≥–µ—Ä—ã, use cases) —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ ‚Äî **Composition Root**.

–ó–¥–µ—Å—å:

- –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω–∂–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è –≤ use cases.
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è fallback-–ª–æ–≥–∏–∫–∞ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏.
- –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≥–æ—Ç–æ–≤—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä.

–°–±–æ—Ä–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é **[Awilix](https://github.com/jeffijoe/awilix)** ‚Äî DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º.

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.
- –ì–∏–±–∫–æ—Å—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å.
- –ï–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

> üí° –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî –≤: [`docs/composition-root.md`](./composition-root.md).
