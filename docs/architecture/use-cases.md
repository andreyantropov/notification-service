# Use Cases: Реальные сценарии использования

Сервис уведомлений **не инициирует** отправку уведомлений. Он является **пассивным посредником (relay)**, который:

- Принимает HTTP-запросы от внешних систем.
- Проверяет корректность данных.
- Отправляет уведомления указанным получателям через доступные каналы.
- Возвращает статус доставки.

Такой подход делает сервис **простым, надёжным и независимым от бизнес-логики**.

---

## 1. Уведомление о присвоении серийного номера

**Источник**: ERP-система  
**Когда происходит**:  
При присвоении серийного номера прибору ERP формирует уведомление и отправляет его в сервис.

**Тело запроса**:

```json
{
  "recipients": [
    { "type": "bitrix", "value": 1001 },
    { "type": "email", "value": "sales1@company.com" }
  ],
  "message": "Прибору [Модель X-2000] присвоен серийный номер SN-12345. Можно начать отслеживание статуса готовности."
}
```

**Что делает сервис**:

- Принимает запрос.
- Пытается отправить уведомление через первый доступный канал.
- Возвращает `201` или `207` с деталями.

**Цель**:  
Обеспечить своевременное вовлечение коммерсантов, чтобы они могли информировать клиента.

---

## 2. Уведомление о создании спецификации

**Источник**: ERP-система  
**Когда происходит**:  
При создании новой технической спецификации ERP отправляет уведомление в сервис.

**Тело запроса**:

```json
{
  "recipients": [
    { "type": "email", "value": "prod-lead@company.com" },
    { "type": "bitrix", "value": 2005 }
  ],
  "message": "Создана новая спецификация на прибор [Модель Y-3000]. Необходимо утвердить технологический процесс."
}
```

**Что делает сервис**:

- Проверяет структуру запроса.
- Отправляет уведомление по первому рабочему каналу.
- Логирует результат.

**Цель**:  
Гарантировать, что руководитель производства оперативно узнаёт о начале нового производственного цикла.
