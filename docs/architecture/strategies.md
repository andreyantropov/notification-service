# üì¶ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç **–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** –≤ —Å–µ—Ä–≤–∏—Å–µ `notification-service`.  
–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç **–ª–æ–≥–∏–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π** —á–µ—Ä–µ–∑ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞–Ω–∞–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `email`, `bitrix`), –ø–æ–∑–≤–æ–ª—è—è –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ—ë —è–¥—Ä–∞.

---

## üß© –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

–°–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–∞–∂–¥–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**.  
–ö–ª–∏–µ–Ω—Ç —É–∫–∞–∑—ã–≤–∞–µ—Ç –∂–µ–ª–∞–µ–º—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —á–µ—Ä–µ–∑ –ø–æ–ª–µ `notification.strategy`, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```json
{
  "contacts": [{ "type": "email", "value": "user@example.com" }],
  "message": "–ü—Ä–∏–≤–µ—Ç!",
  "strategy": "send_to_all_available"
}
```

–ï—Å–ª–∏ –ø–æ–ª–µ –Ω–µ –∑–∞–¥–∞–Ω–æ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: **`send_to_first_available`**.

–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É:

```ts
type DeliveryStrategy = (
  notification: Notification,
  channels: Channel[],
) => Promise<Result>;
```

–ì–¥–µ:

- `notification` ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º–∏, —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏,
- `channels` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏,
- `Result` ‚Äî –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª–µ–º `status: "success" | "failure"` –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, `error` –∏–ª–∏ `warnings`.

> ‚úÖ **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è** ‚Äî –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `Result`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
>
> - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ,
> - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–±–æ—è—Ö (`warnings`),
> - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤.

–í—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ `DeliveryService`** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è `notification.strategy`.  
–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–∞–∫ **enum**:

---

## 1. `send_to_first_available`

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ **–ø–µ—Ä–≤–æ–º—É –ø–æ–ª—É—á–∞—Ç–µ–ª—é, –∫–æ—Ç–æ—Ä–æ–º—É —É–¥–∞–ª–æ—Å—å –¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ**, –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å.

> –ê–Ω–∞–ª–æ–≥: ¬´fallback-—Ü–µ–ø–æ—á–∫–∞¬ª ‚Äî –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Bitrix ‚Üí –ø—Ä–∏ –æ—à–∏–±–∫–µ ‚Üí –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Email ‚Üí –ø—Ä–∏ —É—Å–ø–µ—Ö–µ ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –≤ `notification.contacts`:
   - –§–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –∫–∞–Ω–∞–ª—ã, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ –µ–≥–æ —Ç–∏–ø (`channel.isSupports(contact)`),
   - –ö–∞–Ω–∞–ª—ã –ø–µ—Ä–µ–±–∏—Ä–∞—é—Ç—Å—è **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ**,
   - –ü—Ä–∏ **–ø–µ—Ä–≤–æ–º —É—Å–ø–µ—Ö–µ** ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è.
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è **—É—Å–ø–µ—à–Ω—ã–º**, –µ—Å–ª–∏ **—Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–æ–Ω—Ç–∞–∫—Ç** –±—ã–ª –¥–æ—Å—Ç–∞–≤–ª–µ–Ω.

> ‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–∫–∞ **–ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞**.

---

### üìà –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```mermaid
sequenceDiagram
    participant Service as DeliveryService
    participant Strategy as send_to_first_available
    participant Channel1 as BitrixChannel
    participant Channel2 as SmtpChannel
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

    Service->>Strategy: send(notification, channels)
    Strategy->>Strategy: contact = { type: "bitrix", value: "123" }

    Strategy->>Channel1: isSupports(contact)?
    Channel1-->>Strategy: true
    Strategy->>Channel1: send(contact, message)
    Channel1-->>Strategy: –û—à–∏–±–∫–∞ (404)

    Strategy->>Channel2: isSupports(contact)?
    Channel2-->>Strategy: true
    Strategy->>Channel2: send(contact, message)
    Channel2-->>Strategy: –£—Å–ø–µ—Ö (200)

    Strategy-->>Service: Result { status: "success" }
    Service->>User: HTTP 202 Accepted
```

---

### ‚úÖ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Bitrix24), —Ä–µ–∑–µ—Ä–≤–Ω—ã–π ‚Äî Email,
- –ù—É–∂–Ω–æ **–º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–æ–∫**,
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å **—Ö–æ—Ç—è –±—ã –æ–¥–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º**,
- –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ,
  - –°–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏,
  - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ.

---

## 2. `send_to_all_available`

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ **–≤—Å–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º –ø–æ –≤—Å–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–º –∫–∞–Ω–∞–ª–∞–º** –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.  
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º, –µ—Å–ª–∏ **—Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–∞–Ω–∞–ª** —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏–ª.

> –ê–Ω–∞–ª–æ–≥: ¬´broadcast¬ª ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º, –∫—Ç–æ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å.

---

### üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞:
   - –û–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤—Å–µ –∫–∞–Ω–∞–ª—ã, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ –µ–≥–æ —Ç–∏–ø,
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** —á–µ—Ä–µ–∑ –≤—Å–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∫–∞–Ω–∞–ª—ã (`Promise.allSettled`),
2. –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è,
3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è **—É—Å–ø–µ—à–Ω—ã–º**, –µ—Å–ª–∏ **—Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞** –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —É—Å–ø–µ—Ö–æ–º.

> ‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–∫–∞ **–Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è** –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —É—Å–ø–µ—Ö–∞ ‚Äî –ø—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º.

---

### üìà –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```mermaid
sequenceDiagram
    participant Service as DeliveryService
    participant Strategy as send_to_all_available
    participant Bitrix as BitrixChannel
    participant Smtp as SmtpChannel
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

    Service->>Strategy: send(notification, channels)

    Strategy->>Strategy: –û–±—Ä–∞–±–æ—Ç–∫–∞ contact

    Strategy->>Bitrix: isSupports()? ‚Üí true
    Strategy->>Smtp: isSupports()? ‚Üí true

    Strategy->>Bitrix: send() -- –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
    Strategy->>Smtp: send() -- –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

    Bitrix-->>Strategy: –û—à–∏–±–∫–∞
    Smtp-->>Strategy: –£—Å–ø–µ—Ö

    Strategy-->>Service: Result { status: "success", warnings: [...] }
    Service->>User: HTTP 202 Accepted
```

---

### ‚úÖ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –ù—É–∂–Ω–æ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è,
- –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, –≥–¥–µ **–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ø—É—Å—Ç–∏–º–æ**,
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏–ª–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ª–∏—Ü**,
- –ü—Ä–∏–º–µ—Ä—ã:
  - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã,
  - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å —É—á–∞—Å—Ç–∏–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–∞–Ω–¥,
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–º–µ–Ω–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∑–∞–¥–∞—á–∏.

---

## üß∞ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

–ù–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø—É—Ç—ë–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É `DeliveryStrategy`, –∏ **—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ `switch` –≤ `DeliveryService`**.

---

## üß© –í–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–∏–¥–µ–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ)

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è          | –û–ø–∏—Å–∞–Ω–∏–µ                                                    |
| ------------------ | ----------------------------------------------------------- |
| `priority_based`   | –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É –∫–∞–Ω–∞–ª–æ–≤ (Telegram > Email > SMS)     |
| `broadcast_to_all` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º, –¥–∞–∂–µ –µ—Å–ª–∏ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è                       |
| `conditional`      | –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ —É—Å–ª–æ–≤–∏—é (–Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è ‚Üí —Ç–æ–ª—å–∫–æ Telegram) |
| `delayed`          | –û—Ç–ª–æ–∂–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞ N –º–∏–Ω—É—Ç                                |
| `sampling`         | –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–ª—è A/B —Ç–µ—Å—Ç–æ–≤)      |

---

## üìå –í—ã–≤–æ–¥—ã

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è                 | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å        | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç        | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ |
| ------------------------- | ------------------------- | ----------------- | ------------ |
| `send_to_first_available` | –û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª + fallback | –ü–µ—Ä–≤–æ–º—É —É—Å–ø–µ—à–Ω–æ–º—É | –ù–µ—Ç          |
| `send_to_all_available`   | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞     | –í—Å–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–º   | –î–∞           |

- –°—Ç—Ä–∞—Ç–µ–≥–∏—è **–≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ** —á–µ—Ä–µ–∑ –ø–æ–ª–µ `strategy`.
- –í—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç **`Result` —Å `status`**, –∞ –Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏.
- –ù–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç—Ä–µ–±—É—é—Ç **–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ `DeliveryService`**, –Ω–æ **–Ω–µ –Ω–∞—Ä—É—à–∞—é—Ç —á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É**.

> üí° **–°–æ–≤–µ—Ç**:  
> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `send_to_first_available` –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Å—Ç–∞—Ç—É—Å—ã, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è).  
> –í–∫–ª—é—á–∞–π—Ç–µ `send_to_all_available` —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (–∞–≤–∞—Ä–∏–∏, —Å–º–µ–Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞).

```

```
