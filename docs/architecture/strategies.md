# üì¶ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç **–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** –≤ —Å–µ—Ä–≤–∏—Å–µ `notification-service`.  
–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç **–ª–æ–≥–∏–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π** —á–µ—Ä–µ–∑ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞–Ω–∞–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, Bitrix24, Email), –ø–æ–∑–≤–æ–ª—è—è –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ—ë —è–¥—Ä–∞.

–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `DeliveryStrategy` –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω–µ–Ω—ã –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω—ã.

---

## üß© –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

–°–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–≥–∏–±–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏**, –∫–æ—Ç–æ—Ä—ã–µ:

- –ü—Ä–∏–Ω–∏–º–∞—é—Ç —Å–ø–∏—Å–æ–∫ `NotificationSender` (–∫–∞–Ω–∞–ª—ã –¥–æ—Å—Ç–∞–≤–∫–∏)
- –ü–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (`recipients`, `message`)
- –£–ø—Ä–∞–≤–ª—è—é—Ç –ø–æ—Ä—è–¥–∫–æ–º –∏ —É—Å–ª–æ–≤–∏—è–º–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç `Promise<void>` ‚Äî —É—Å–ø–µ—Ö –∏–ª–∏ –æ—à–∏–±–∫–∞

```ts
type DeliveryStrategy = (
  senders: NotificationSender[],
  notification: Notification,
  onError: (
    payload: { recipient: Recipient; message: string },
    error: Error,
  ) => void,
) => Promise<void>;
```

–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏:

- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–º—É –¥–æ—Å—Ç—É–ø–Ω–æ–º—É
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–º
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏

---

## 1. `sendToFirstAvailableStrategy`

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ **–ø–µ—Ä–≤–æ–º—É –ø–æ–ª—É—á–∞—Ç–µ–ª—é, –∫–æ—Ç–æ—Ä–æ–º—É —É–¥–∞–ª–æ—Å—å –¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ**, –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å.

> –ê–Ω–∞–ª–æ–≥: "fallback-—Ü–µ–ø–æ—á–∫–∞" ‚Äî –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Bitrix ‚Üí –µ—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Email ‚Üí –µ—Å–ª–∏ –∏ —ç—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ ‚Äî –æ—à–∏–±–∫–∞.

---

### üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:
   - –§–∏–ª—å—Ç—Ä—É–µ–º –∫–∞–Ω–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –µ–≥–æ —Ç–∏–ø (`isSupports(recipient)`)
   - –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ –∫–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª **–ø–æ –æ—á–µ—Ä–µ–¥–∏**
   - –ü—Ä–∏ **—É—Å–ø–µ—Ö–µ** ‚Äî –∑–∞–≤–µ—Ä—à–∞–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—é (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º)
2. –ï—Å–ª–∏ **–Ω–∏ –æ–¥–Ω–æ–º—É** –ø–æ–ª—É—á–∞—Ç–µ–ª—é –Ω–µ —É–¥–∞–ª–æ—Å—å –¥–æ—Å—Ç–∞–≤–∏—Ç—å ‚Äî –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É

> ‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–∫–∞ **–ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞**.

---

### üìà –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```mermaid
sequenceDiagram
    participant Service as NotificationService
    participant Strategy as sendToFirstAvailable
    participant Sender1 as BitrixSender
    participant Sender2 as SmtpSender
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

    Service->>Strategy: send(senders, { recipients, message })
    Strategy->>Strategy: recipients[0] = { type: "bitrix", value: "123" }

    Strategy->>Sender1: isSupports(recipient)?
    Sender1-->>Strategy: true
    Strategy->>Sender1: send(recipient, message)
    Sender1-->>Strategy: –û—à–∏–±–∫–∞ (404)

    Strategy->>Sender2: isSupports(recipient)?
    Sender2-->>Strategy: true
    Strategy->>Sender2: send(recipient, message)
    Sender2-->>Strategy: –£—Å–ø–µ—Ö (200)

    Strategy-->>Service: –£—Å–ø–µ—à–Ω–æ
    Service->>User: HTTP 201 Created
```

---

### ‚úÖ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Bitrix24), —Ä–µ–∑–µ—Ä–≤–Ω—ã–π ‚Äî Email
- –ù—É–∂–Ω–æ **–º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–æ–∫**
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å **—Ö–æ—Ç—è –±—ã –æ–¥–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º**
- –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ
  - –°–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏
  - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ

---

### üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```ts
const service = createNotificationDeliveryService(
  [bitrixSender, smtpSender],
  sendToFirstAvailableStrategy,
);

await service.send({
  recipients: [
    { type: "bitrix", value: "12345" },
    { type: "email", value: "user@company.com" },
  ],
  message: "–í–∞—à–∞ –∑–∞–¥–∞—á–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞",
});
```

> –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ Bitrix ‚Üí –ø—Ä–∏ –æ—à–∏–±–∫–µ ‚Üí –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ Email ‚Üí –ø—Ä–∏ —É—Å–ø–µ—Ö–µ ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.

---

## 2. `sendToAllAvailableStrategy`

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ **–≤—Å–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º –ø–æ –≤—Å–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–º –∫–∞–Ω–∞–ª–∞–º** –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.  
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º, –µ—Å–ª–∏ **—Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–∞–Ω–∞–ª** —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏–ª.

> –ê–Ω–∞–ª–æ–≥: "broadcast" ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º, –∫—Ç–æ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å.

---

### üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:
   - –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—Å–µ –∫–∞–Ω–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –µ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç
   - –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** —á–µ—Ä–µ–∑ –≤—Å–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∫–∞–Ω–∞–ª—ã
2. –ñ–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫
3. –ï—Å–ª–∏ **–≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å** ‚Äî –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É

> ‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–∫–∞ **–Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è** –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —É—Å–ø–µ—Ö–∞ ‚Äî –ø—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º.

---

### üìà –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```mermaid
sequenceDiagram
    participant Service as NotificationService
    participant Strategy as sendToAllAvailable
    participant Bitrix as BitrixSender
    participant Smtp as SmtpSender
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

    Service->>Strategy: send(senders, { recipients, message })

    Strategy->>Strategy: –û–±—Ä–∞–±–æ—Ç–∫–∞ recipients[0]

    Strategy->>Bitrix: isSupports()? ‚Üí true
    Strategy->>Smtp: isSupports()? ‚Üí true

    Strategy->>Bitrix: send() -- –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
    Strategy->>Smtp: send() -- –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

    Bitrix-->>Strategy: –û—à–∏–±–∫–∞
    Smtp-->>Strategy: –£—Å–ø–µ—Ö

    Strategy-->>Service: –£—Å–ø–µ—à–Ω–æ (—Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω)
    Service->>User: HTTP 201 Created
```

---

### ‚úÖ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –ù—É–∂–Ω–æ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, –≥–¥–µ **–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ø—É—Å—Ç–∏–º–æ**
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏–ª–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ª–∏—Ü**
- –ü—Ä–∏–º–µ—Ä—ã:
  - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
  - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å —É—á–∞—Å—Ç–∏–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–º–µ–Ω–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∑–∞–¥–∞—á–∏

---

### üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```ts
const service = createNotificationDeliveryService(
  [bitrixSender, smtpSender],
  sendToAllAvailableStrategy,
);

await service.send({
  recipients: [{ type: "bitrix", value: "12345" }],
  message: "–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—à–ª–∞ –≤ —Ä–µ–∂–∏–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è",
});
```

> –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ Bitrix **–∏** —á–µ—Ä–µ–∑ Email (–µ—Å–ª–∏ –æ–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ç–∏–ø), –¥–∞–∂–µ –µ—Å–ª–∏ –æ–¥–∏–Ω —É–∂–µ —Å—Ä–∞–±–æ—Ç–∞–ª.

---

## üß∞ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

–¢—ã –º–æ–∂–µ—à—å –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `DeliveryStrategy`.

### –ü—Ä–∏–º–µ—Ä: `sendWithRetryStrategy`

```ts
import { DeliveryStrategy } from "./types/DeliveryStrategy.js";

const withRetry = async <T>(
  fn: () => Promise<T>,
  retries: number,
): Promise<T> => {
  let lastError;
  for (let i = 0; i < retries; i++) {
    try {
      return await fn();
    } catch (error) {
      lastError = error;
    }
  }
  throw lastError;
};

export const sendWithRetryStrategy: DeliveryStrategy = async (
  senders,
  { recipients, message },
  onError,
) => {
  for (const recipient of recipients) {
    const supported = senders.filter((s) => s.isSupports(recipient));
    await withRetry(
      () => sendToRecipient(recipient, message, supported, onError),
      3,
    );
  }
};
```

> –¢–∞–∫—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ (retry, circuit breaker –∏ —Ç.–¥.).

---

## üß© –í–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–∏–¥–µ–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ)

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è                | –û–ø–∏—Å–∞–Ω–∏–µ                                                          |
| ------------------------ | ----------------------------------------------------------------- |
| `priorityBasedStrategy`  | –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É –∫–∞–Ω–∞–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Telegram > Email > SMS) |
| `broadcastToAllStrategy` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º, –¥–∞–∂–µ –µ—Å–ª–∏ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è                             |
| `conditionalStrategy`    | –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ —É—Å–ª–æ–≤–∏—é (–≤—Ä–µ–º—è —Å—É—Ç–æ–∫, —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)         |
| `delayedStrategy`        | –û—Ç–ª–æ–∂–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞ N –º–∏–Ω—É—Ç                                      |
| `samplingStrategy`       | –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–ª—è A/B —Ç–µ—Å—Ç–æ–≤)            |

---

## üìå –í—ã–≤–æ–¥—ã

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è                      | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å        | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç        |
| ------------------------------ | ------------------------- | ----------------- |
| `sendToFirstAvailableStrategy` | –û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª + fallback | –ü–µ—Ä–≤–æ–º—É —É—Å–ø–µ—à–Ω–æ–º—É |
| `sendToAllAvailableStrategy`   | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞     | –í—Å–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–º   |

- –õ–µ–≥–∫–æ **—Ä–∞—Å—à–∏—Ä—è—é—Ç—Å—è** –∏ **—Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è**
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç **–≥–∏–±–∫—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** —á–µ—Ä–µ–∑ DI

> üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ –∏ **–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**. –î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π –æ–±—ë—Ä—Ç–∫—É-—Ñ–∞–±—Ä–∏–∫—É.
