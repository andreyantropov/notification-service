# API

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç HTTP API —Å–µ—Ä–≤–∏—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.  
–ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º –≤–∏–¥–µ –ø–æ –∞–¥—Ä–µ—Å—É `/api-docs` (Swagger UI).

---

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–≠–Ω–¥–ø–æ–∏–Ω—Ç `POST /v1/notifications` –∑–∞—â–∏—â—ë–Ω **JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π**.  
–ö–ª–∏–µ–Ω—Ç—ã –æ–±—è–∑–∞–Ω—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω Keycloak –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:

```http
Authorization: Bearer <JWT>
```

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã `/health/*` –∏ `/api-docs` ‚Äî **–ø—É–±–ª–∏—á–Ω—ã–µ**, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

---

## –ë–∞–∑–æ–≤—ã–π URL

```
{{baseUrl}}/v1
```

(–≥–¥–µ `{{baseUrl}}` ‚Äî –∞–¥—Ä–µ—Å —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞)

---

## –û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç: `POST /v1/notifications`

–ü—Ä–∏–Ω–∏–º–∞–µ—Ç **–æ–¥–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** –∏–ª–∏ **–º–∞—Å—Å–∏–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** (–æ—Ç 1 –¥–æ 100).

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ö–∞–∂–¥–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ **–æ–¥–Ω–æ–º—É –ø–æ–ª—É—á–∞—Ç–µ–ª—é**, –Ω–æ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤** ‚Äî —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏:

- `email` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ email,
- `bitrix` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Bitrix24 (–ø–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

–ü–æ–ª–µ `contacts` ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è.  
–î–æ—Å—Ç–∞–≤–∫–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **—Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π** (—Å–º. –Ω–∏–∂–µ).

#### –ü—Ä–∏–º–µ—Ä –≤—Ö–æ–¥–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```json
{
  "contacts": [
    { "type": "email", "value": "user@company.com" },
    { "type": "bitrix", "value": 12345 }
  ],
  "message": "–í–∞—à –∑–∞–∫–∞–∑ ‚Ññ12345 –≥–æ—Ç–æ–≤ –∫ –≤—ã–¥–∞—á–µ",
  "isImmediate": true,
  "strategy": "send_to_first_available"
}
```

> üí° –ö–ª–∏–µ–Ω—Ç **–Ω–µ –¥–æ–ª–∂–µ–Ω** –∏ **–Ω–µ –º–æ–∂–µ—Ç** –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ–ª–µ `id` –∏–ª–∏ `subject` ‚Äî –æ–Ω–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º.

---

### –ü–æ–ª–µ `strategy` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏:

- **`send_to_first_available`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–±–æ—á–∏–π –∫–∞–Ω–∞–ª, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ.
- **`send_to_all_available`** ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ –≤—Å–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏ —Ä–∞–±–æ—á–∏–µ –∫–∞–Ω–∞–ª—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

> üí° –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É —ç–∫–æ–Ω–æ–º–∏–µ–π —Ä–µ—Å—É—Ä—Å–æ–≤ (`first`) –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é (`all`).

---

### –ü–æ–ª–µ `isImmediate`

- `true` ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ**.
- `false` –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ **–æ—á–µ—Ä–µ–¥—å** –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–∞—á–∫–æ–π.

> üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `isImmediate: true` —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (–∞–≤–∞—Ä–∏—è, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞).

---

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ (`subject`)

–°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –æ—Ç–≤–µ—Ç –æ–±—ä–µ–∫—Ç `subject`, –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–π –∏–∑ JWT-—Ç–æ–∫–µ–Ω–∞:

```json
"subject": {
  "id": "user-123",
  "name": "John Doe"
}
```

- `id` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π (–∏–∑ `sub` –∏–ª–∏ `preferred_username`),
- `name` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π.

> ‚ö†Ô∏è –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ `subject` ‚Äî –æ–Ω —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Å–µ—Ä–≤–µ—Ä–æ–º.

---

### –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (`id`)

–°–µ—Ä–≤–µ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –∫–∞–∂–¥–æ–º—É **–≤–∞–ª–∏–¥–Ω–æ–º—É** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—é —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `id` (UUID v4).  
–û–Ω:

- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ,
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–∫–≤–æ–∑–Ω–æ–π —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ (`traceId`, `correlationId`),
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ –ª–æ–≥–∞—Ö –∏ Grafana.

---

### –ü—Ä–∏–Ω—Ü–∏–ø —á–∞—Å—Ç–∏—á–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–°–µ—Ä–≤–∏—Å **–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–∞–∂–¥–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ**:

- ‚úÖ **–í–∞–ª–∏–¥–Ω—ã–µ** ‚Äî –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É, –ø–æ–ª—É—á–∞—é—Ç `id`.
- ‚ùå **–ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ** ‚Äî –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è —Å –¥–µ—Ç–∞–ª—è–º–∏ –æ—à–∏–±–æ–∫.
- üîÅ –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–Ω–µ —Ç–µ—Ä—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –≤ –¥—Ä—É–≥–∏—Ö.

> üí° –ü—Ä–∏–º–µ—Ä: –∏–∑ 10 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π 9 –≤–∞–ª–∏–¥–Ω—ã ‚Äî –æ–Ω–∏ –±—É–¥—É—Ç –ø—Ä–∏–Ω—è—Ç—ã, 1 ‚Äî –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ, –Ω–æ –Ω–µ –ø–æ–º–µ—à–∞–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–º.

---

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- `Content-Type: application/json`
- –ú–∞–∫—Å–∏–º—É–º **100 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** –≤ –∑–∞–ø—Ä–æ—Å–µ.
- –ö–∞–∂–¥–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
  - –î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å **–º–∏–Ω–∏–º—É–º –æ–¥–∏–Ω –∫–æ–Ω—Ç–∞–∫—Ç**,
  - –ò–º–µ—Ç—å **–Ω–µ–ø—É—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** (`minLength: 1`).
- –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ (`[]`) –∏–ª–∏ **–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** ‚Üí `400 Bad Request`.

---

### –§–æ—Ä–º–∞—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞

#### 1. –û–¥–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

```json
{
  "contacts": [{ "type": "email", "value": "user@example.com" }],
  "message": "–ü—Ä–∏–≤–µ—Ç!",
  "isImmediate": false,
  "strategy": "send_to_first_available"
}
```

#### 2. –ú–∞—Å—Å–∏–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (1‚Äì100)

```json
[
  {
    "contacts": [{ "type": "email", "value": "user1@example.com" }],
    "message": "–ü—Ä–∏–≤–µ—Ç, user1!",
    "isImmediate": true
  },
  {
    "contacts": [{ "type": "bitrix", "value": 12345 }],
    "message": "–ü—Ä–∏–≤–µ—Ç, user2!",
    "strategy": "send_to_all_available"
  }
]
```

> üí° –ï—Å–ª–∏ `strategy` –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `send_to_first_available`.  
> –ï—Å–ª–∏ `isImmediate` –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî —Å—á–∏—Ç–∞–µ—Ç—Å—è `false`.

---

### –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤

| –ö–æ–¥                         | –û–ø–∏—Å–∞–Ω–∏–µ                                                 |
| --------------------------- | -------------------------------------------------------- |
| `202 Accepted`              | –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∞–ª–∏–¥–Ω—ã –∏ –ø—Ä–∏–Ω—è—Ç—ã –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É.           |
| `207 Multi-Status`          | –ß–∞—Å—Ç–∏—á–Ω—ã–π —É—Å–ø–µ—Ö: —á–∞—Å—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤–∞–ª–∏–¥–Ω–∞, —á–∞—Å—Ç—å ‚Äî –Ω–µ—Ç. |
| `400 Bad Request`           | –ù–∏ –æ–¥–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ—à–ª–æ –≤–∞–ª–∏–¥–∞—Ü–∏—é.                 |
| `401 Unauthorized`          | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∏–ª–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω JWT-—Ç–æ–∫–µ–Ω.     |
| `500 Internal Server Error` | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ (—Å–±–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ).        |
| `504 Gateway Timeout`       | –ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ (—Ç–∞–π–º–∞—É—Ç).             |

> ‚ùó API **–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏** ‚Äî —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø—Ä–∏—ë–º–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É.

---

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ `207 Multi-Status`

```json
{
  "message": "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏–Ω—è—Ç—ã —á–∞—Å—Ç–∏—á–Ω–æ: 2 –ø—Ä–∏–Ω—è—Ç–æ, 1 –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ",
  "totalCount": 3,
  "acceptedCount": 2,
  "rejectedCount": 1,
  "details": [
    {
      "status": "success",
      "notification": {
        "id": "a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8",
        "createdAt": "2025-12-14T12:00:00.000Z",
        "contacts": [{ "type": "email", "value": "ok@ok.com" }],
        "message": "Hi",
        "isImmediate": true,
        "strategy": "send_to_first_available",
        "subject": { "id": "user-123" }
      }
    },
    {
      "status": "failure",
      "notification": {
        "contacts": [],
        "message": ""
      },
      "error": [
        {
          "code": "too_small",
          "message": "List must contain at least 1 element(s)",
          "path": ["contacts"]
        }
      ]
    }
  ]
}
```

---

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ `400 Bad Request`

```json
{
  "error": "HTTP 400 Bad Request",
  "message": "–ù–∏ –æ–¥–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ—à–ª–æ –≤–∞–ª–∏–¥–∞—Ü–∏—é",
  "details": [
    {
      "item": { "contacts": [], "message": "" },
      "error": [
        {
          "code": "too_small",
          "message": "List must contain at least 1 element(s)",
          "path": ["contacts"]
        }
      ]
    }
  ]
}
```

---

## Healthcheck –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `GET /health/live` ‚Äî **liveness**: —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω.
- `GET /health/ready` ‚Äî **readiness**: –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (RabbitMQ, SMTP –∏ –¥—Ä.) –¥–æ—Å—Ç—É–ø–Ω—ã.

> –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞—Ö (Kubernetes –≤ –±—É–¥—É—â–µ–º).

---

## Middleware

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑:

1. **–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –º–µ—Ç–æ–¥, –ø—É—Ç—å, —Å—Ç–∞—Ç—É—Å, –≤—Ä–µ–º—è.
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–∞** ‚Äî –ø–æ —Å—Ö–µ–º–µ Zod, —Å —á–∞—Å—Ç–∏—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π.
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** ‚Äî 404, 500, 504.
4. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Äî JWT + –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π.

---

## OpenAPI (Swagger)

–ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ OpenAPI 3.1.0 –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

```
{{baseUrl}}/api-docs
```

–í–∫–ª—é—á–∞–µ—Ç:

- –°—Ö–µ–º—ã `IncomingNotification`, `Notification`, `Contact`,
- –ü–æ–¥–¥–µ—Ä–∂–∫—É `oneOf` –∏ `discriminator`,
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤,
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö HTTP-—Å—Ç–∞—Ç—É—Å–æ–≤.

> –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä–æ–≤

- ‚úÖ **–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–∞—á–∫–∞–º–∏** ‚Äî –¥–æ 100 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∑–∞ —Ä–∞–∑.
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `strategy`** –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏.
- ‚ö†Ô∏è **–û—á–∏—â–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ** ‚Äî –∏–∑–±–µ–≥–∞–π—Ç–µ –ø—É—Å—Ç—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π.
- ‚ùå **–ù–µ –¥—É–±–ª–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ 207** ‚Äî `error` –æ–∑–Ω–∞—á–∞–µ—Ç –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –∞ –Ω–µ –¥–æ—Å—Ç–∞–≤–∫–∏.
- üîç **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `id` –∏–∑ –æ—Ç–≤–µ—Ç–∞** –¥–ª—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏.
- üïí **–î–ª—è —Å—Ä–æ—á–Ω—ã—Ö ‚Äî `isImmediate: true`**, –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö ‚Äî –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è.
- üîÑ **–ü–æ–≤—Ç–æ—Ä—è–π—Ç–µ –ø—Ä–∏ 5xx/504** —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π.
- üß™ **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** (`207`) ‚Äî –æ–Ω–∏ —à—Ç–∞—Ç–Ω—ã–µ.
