# üì® Notification Service

–°–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ **Bitrix24** –∏ **Email**.  
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏, –ø–∞–∫–µ—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ OAuth2/JWT –∏ —Å–±–æ—Ä —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ (OpenTelemetry).

> üîå –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º: –Ω–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã (SMS, Telegram –∏ –¥—Ä.) –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—â–µ–Ω—ã:
   - **RabbitMQ** (AMQP 0-9-1)
   - **SMTP-—Å–µ—Ä–≤–µ—Ä** –∏–ª–∏ **Bitrix24**
   - **OpenTelemetry Collector**

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

   ```bash
   cp .env.example .env
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –ø–æ–¥ –≤–∞—à–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
   ```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   npm install
   npm prod
   ```

---

## ‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç          | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ                 |
| ------------------ | -------------------------- |
| **Node.js**        | v23.x –∏–ª–∏ –≤—ã—à–µ             |
| **npm**            | v10.x –∏–ª–∏ –≤—ã—à–µ             |
| **RabbitMQ**       | v3.10+, –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–æ AMQP  |
| **Bitrix24**       | –ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—Ç–∞–ª —Å REST API |
| **SMTP**           | –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SMTP-—Å–µ—Ä–≤–µ—Ä    |
| **OTel Collector** | –î–ª—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏             |

---

## üìÑ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.  
–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Å–º. –≤ —Ñ–∞–π–ª–µ:  
üëâ [.env.example](./.env.example)

---

## ‚ñ∂Ô∏è –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞                 | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
| ----------------------- | ----------------------------------------- |
| `npm run dev`           | –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å `.env.dev`) |
| `npm run build`         | –°–±–æ—Ä–∫–∞ TypeScript ‚Üí `dist/`               |
| `npm run start`         | –ó–∞–ø—É—Å–∫ production-–≤–µ—Ä—Å–∏–∏                  |
| `npm run prod`          | –°–±–æ—Ä–∫–∞ + –∑–∞–ø—É—Å–∫ –≤ production              |
| `npm run migrate:dev`   | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ (dev)     |
| `npm run migrate:prod`  | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–µ–π RabbitMQ (prod)    |
| `npm run test`          | –ó–∞–ø—É—Å–∫ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ (Vitest)               |
| `npm run test:coverage` | –û—Ç—á—ë—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏             |
| `npm run lint`          | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ (ESLint)                    |
| `npm run lint:fix`      | –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ ESLint             |
| `npm run lint:format`   | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (Prettier)            |

---

## üê≥ Docker

–°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `scripts/`:

```bash
./scripts/build.sh
./scripts/run.sh
```

> –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ volume-—ã —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã.

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ADR](./docs/adr/) ‚Äî Architectural Decision Records
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](./docs/architecture/architecture.md)
- [–û–ø–∏—Å–∞–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](./docs/environment.md)
- [–°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∫–æ–¥—É](./docs/guideline.md)

---

> ‚ú® –°–µ—Ä–≤–∏—Å —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, —è–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –æ—Ç–∫–∞–∑–∞ –æ—Ç –º–∞–≥–∏–∏.  
> –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã, –≤—Å—ë –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `.env`, –≤—Å—ë –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—Ä—É–µ—Ç—Å—è.
